<?php
 
function getCurrentUser(){
$email =  $_COOKIE['email'];

if($email != ""){
//Database Login Info removed for security reasons.
$con=mysqli_connect("localhost","username","password","database");
 
// Check connection
if (mysqli_connect_errno())
{
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
 
// This SQL statement selects ALL from the table 'Locations'
$sql = "SELECT id_user, username, name, password FROM users WHERE email='$email'";
 
// Check if there are results
if ($result = mysqli_query($con, $sql))
{
	// If so, then create a results array and a temporary one
	// to hold the data
	$resultArray = array();
	$tempArray = array();
 
	// Loop through each row in the result set
	while($row = $result->fetch_object())
	{
		// Add each row into our results array
		$tempArray = $row;
	    array_push($resultArray, $tempArray);
	}
 
	// Finally, encode the array to JSON and output the results
	return json_encode($resultArray);
}
 
// Close connections
mysqli_close($con);
}
else{
return '[{"id_user": "NULL", "username" : "NULL", "name": "NULL", "password": "NULL"}]';
}
}


function getPostsLimit15(){
// Create connection
//Database Login Info removed for security reasons.
$con=mysqli_connect("localhost","username","password","database");
 
// Check connection
if (mysqli_connect_errno())
{
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
 
// This SQL statement selects ALL from the table 'Locations'
$sql = "SELECT * FROM posts ORDER BY id desc LIMIT 15";
 
// Check if there are results
if ($result = mysqli_query($con, $sql))
{
	// If so, then create a results array and a temporary one
	// to hold the data
	$resultArray = array();
	$tempArray = array();
 
	// Loop through each row in the result set
	while($row = $result->fetch_object())
	{
		// Add each row into our results array
		$tempArray = $row;
	    array_push($resultArray, $tempArray);
	}
 
	// Finally, encode the array to JSON and output the results
	return json_encode($resultArray);
      // Close connections
mysqli_close($con);
}
}

function getAllPosts(){
// Create connection
//Database Login Info removed for security reasons.
$con=mysqli_connect("localhost","username","password","database");
 
// Check connection
if (mysqli_connect_errno())
{
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
 
// This SQL statement selects ALL from the table 'Locations'
$sql = "SELECT * FROM posts ORDER BY id desc";
 
// Check if there are results
if ($result = mysqli_query($con, $sql))
{
	// If so, then create a results array and a temporary one
	// to hold the data
	$resultArray = array();
	$tempArray = array();
 
	// Loop through each row in the result set
	while($row = $result->fetch_object())
	{
		// Add each row into our results array
		$tempArray = $row;
	    array_push($resultArray, $tempArray);
	}
 
	// Finally, encode the array to JSON and output the results
	return json_encode($resultArray);
      // Close connections
mysqli_close($con);
}
}

function getUserAccntData(){

//Database Login Info removed for security reasons.
$con=mysqli_connect("localhost","username","password","database");
 
// Check connection
if (mysqli_connect_errno())
{
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
 
// This SQL statement selects ALL from the table 'Locations'
$sql = "SELECT id_user, username, name, password FROM users";
 
// Check if there are results
if ($result = mysqli_query($con, $sql))
{
	// If so, then create a results array and a temporary one
	// to hold the data
	$resultArray = array();
	$tempArray = array();
 
	// Loop through each row in the result set
	while($row = $result->fetch_object())
	{
		// Add each row into our results array
		$tempArray = $row;
	    array_push($resultArray, $tempArray);
	}
 
	// Finally, encode the array to JSON and output the results
	return json_encode($resultArray);
}
 
// Close connections
mysqli_close($con);
}


?>